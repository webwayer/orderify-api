import { Express } from 'express'

export async function appFactory(app: Express, config: { BASE_URL: string }) {
    const [schema, host_port] = config.BASE_URL.split('://')
    const [host, port] = host_port.split(':')

    await new Promise((resolve, reject) => {
        app.listen(port, err => {
            if (err) {
                reject(err)
            }
            resolve()
        })
    })

    return app
}